<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Remote Access &mdash; Nukestar 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Nukestar 0.1 documentation" href="index.html" />
    <link rel="next" title="Introduction" href="intro.html" />
    <link rel="prev" title="Welcome to Nukestar’s documentation!" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to Nukestar’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Nukestar 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="remote-access">
<h1>Remote Access<a class="headerlink" href="#remote-access" title="Permalink to this headline">¶</a></h1>
<p>Nukestar can be accessed via SSH:</p>
<div class="highlight-python"><div class="highlight"><pre>$ssh &lt;user_name&gt;@nukestar.me.utexas.edu
</pre></div>
</div>
<p>Before you can connect you need to email the system admins with the following info included:</p>
<blockquote>
<div><ul class="simple">
<li>Your desired user name</li>
<li>A public rsa key (see next section)</li>
</ul>
</div></blockquote>
<div class="section" id="linux-osx">
<h2>Linux / OSX<a class="headerlink" href="#linux-osx" title="Permalink to this headline">¶</a></h2>
<p>If you do not already have an rsa key pair generate them:</p>
<div class="highlight-python"><div class="highlight"><pre>$ssh-keygen -t rsa
</pre></div>
</div>
<p>Follow the prompt on the screen.</p>
<p>Your new keys will be placed in <code class="docutils literal"><span class="pre">~/.ssh/.</span></code> on your machine.  Keep the private key safe!  The public key (had file suffix <code class="docutils literal"><span class="pre">.pub</span></code>) should be emailed to the system admin.</p>
</div>
<div class="section" id="windows-clients">
<h2>Windows Clients<a class="headerlink" href="#windows-clients" title="Permalink to this headline">¶</a></h2>
<p>It is recommended to use PuTTY (freely avalible) to generate public/private key pair.  email the public key to a system administrator.</p>
</div>
<div class="section" id="dealing-with-broken-pipes">
<h2>Dealing with &#8220;broken pipes&#8221;<a class="headerlink" href="#dealing-with-broken-pipes" title="Permalink to this headline">¶</a></h2>
<p>A SSH connection will not survive an extended network interuption due to intermittent connectivity (perhaps iffy wifi).  You may recive the error message <code class="docutils literal"><span class="pre">broken</span> <span class="pre">pipe</span></code> if this occures.  Worse, if you happened to be running, say, your awesome post-processing utility when this happens the program may terminate before it is done and you would have to start all over again.  To avoid such a catastrophe, it is advisable to use <code class="docutils literal"><span class="pre">screen</span></code> or <code class="docutils literal"><span class="pre">tmux</span></code> to ensure you SSH session survives interuptions in your connection to nukestar.</p>
<p>To use <code class="docutils literal"><span class="pre">screen</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>$screen -S &lt;session_name&gt;
</pre></div>
</div>
<p>It is a good idea to do the above fist-thing when connecting to nukestar.</p>
<p>pressing <code class="docutils literal"><span class="pre">ctrl+a,</span> <span class="pre">d</span></code>  detatches from the current session.</p>
<p>You can recover a <code class="docutils literal"><span class="pre">screen</span></code> session by first listing your running sessions:</p>
<div class="highlight-python"><div class="highlight"><pre>$screen --list
</pre></div>
</div>
<p>And re-attaching to the desired sessoin with:</p>
<div class="highlight-python"><div class="highlight"><pre>$screen -R &lt;session_name&gt;
</pre></div>
</div>
</div>
<div class="section" id="data-transfer-to-from-nukestar">
<h2>Data transfer to/from Nukestar<a class="headerlink" href="#data-transfer-to-from-nukestar" title="Permalink to this headline">¶</a></h2>
<p>Transfering data to and from nukestar can be done with a utility called <code class="docutils literal"><span class="pre">scp</span></code> (secure copy protocall).  You will need to install <code class="docutils literal"><span class="pre">scp</span></code> on your local machine if you want to use it.  There are alternatives: <code class="docutils literal"><span class="pre">Filezilla</span></code> is a GUI program that can proform the same function as <code class="docutils literal"><span class="pre">scp</span></code>.</p>
<p>If you want to push data from your local machine to nukestar:</p>
<div class="highlight-python"><div class="highlight"><pre>$scp /path/to/data/file/on/your/local/machine.txt  &lt;user_name&gt;@nukestar.me.utexas.edu:~/destination/path/.
</pre></div>
</div>
<p>If you want to pull data from nukestar to your local machine:</p>
<div class="highlight-python"><div class="highlight"><pre>$scp &lt;user_name&gt;@nukestar.me.utexas.edu:~/destination/path/file.txt  /path/on/local/machine/file.txt
</pre></div>
</div>
<p>To pull/push and entire folder you need to use the <code class="docutils literal"><span class="pre">-r</span></code> flag:</p>
<div class="highlight-python"><div class="highlight"><pre>$scp -r &lt;username&gt;@nukestar.me.utexas.edu:&lt;source_folder&gt; &lt;destination_folder&gt;
</pre></div>
</div>
<p>If transfering many small data or text files it may be much faster to use a utility called <code class="docutils literal"><span class="pre">rsync</span></code> (which should be avalible on any linux or OSX install.  An example syntax for pulling an entire folder from nukestar to your local machine using rsync is given bellow:</p>
<div class="highlight-python"><div class="highlight"><pre>$rsync -avze ssh &lt;user_name&gt;@nukestar.me.utexas.edu:~/path/to/data  &lt;destination_path&gt; --progress
</pre></div>
</div>
</div>
<div class="section" id="visualizing-results">
<h2>Visualizing Results<a class="headerlink" href="#visualizing-results" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div></div></blockquote>
<p>To use a GUI program through an SSH connection (such as MCNP&#8217;s plotter) you need to enable Xforwarding on your SSH session.  When connecting to nukestar with SSH add an aditional argument as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>$ssh -X &lt;user_name&gt;@nukestar.me.utexas.edu
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Windows users will need to install Xorg on their local machine.  The freely avalible Cygwin package contains Xorg for windows.</p>
</div>
</div>
</div>
<div class="section" id="environment-modules">
<h1>Environment Modules<a class="headerlink" href="#environment-modules" title="Permalink to this headline">¶</a></h1>
<p>Having many versions of gcc, cmake, openmpi ect installed and switching between them quickly can be a pain.  There is a package to ease this pain...</p>
<p>The Environment Modules package allows the user to manipulate environment variables.</p>
<p>A user can create new modules and place them in <code class="docutils literal"><span class="pre">/usr/share/modules/modulefiles/.</span></code></p>
<p>A list of currently avalible modules is given by:</p>
<div class="highlight-python"><div class="highlight"><pre>$module avail
</pre></div>
</div>
<p>A module can be loaded by:</p>
<div class="highlight-python"><div class="highlight"><pre>$module load &lt;module&gt;
</pre></div>
</div>
<p>And unloaded by:</p>
<div class="highlight-python"><div class="highlight"><pre>$module unload &lt;module&gt;
</pre></div>
</div>
<div class="section" id="example-environment-module">
<h2>Example Environment Module<a class="headerlink" href="#example-environment-module" title="Permalink to this headline">¶</a></h2>
<p>An example env module is provided below:</p>
<div class="highlight-python"><div class="highlight"><pre>#%Module1.0
proc ModulesHelp { } {
global dotversion

puts stderr &quot;\tSets up VERA ENV vars to run VERA-CS&quot;
}
conflict veraDEV


module-whatis &quot;Sets the environment for running VERA-CS&quot;

# Tcl script vars
set VERA_DEV_ENV_BASE /home/wlg333/vera
set VERA_DEV_ENV_COMPILER_BASE /home/wlg333/vera/gcc-4.8.3
set VERA_GCC_BASE_DIR /home/wlg333/vera/gcc-4.8.3/toolset/gcc-4.8.3
set VERA_MPI_BASE_DIR /home/wlg333/vera/gcc-4.8.3/toolset/mpich-3.1.3
set VERA_INSTALL_BASE_DIR /home/wlg333/vera/installs/2015-11-18

set HDF5_LIB_DIR /home/wlg333/vera/gcc-4.8.3/tpls/opt/hdf5-1.8.10/lib
set HYPRE_LIB_DIR /home/wlg333/vera/gcc-4.8.3/tpls/opt/hypre-2.9.1a/lib
set PETSC_LIB_DIR /home/wlg333/vera/gcc-4.8.3/tpls/opt/petsc-3.5.4/lib

# Path of PBS script helper
prepend-path PATH /home/wlg333/vera/PBSsub

# Set the binary dir for MPI executbles (e.g. mpirun)
prepend-path PATH $VERA_MPI_BASE_DIR/bin

# Set the binary dir for the installed components
prepend-path PATH $VERA_INSTALL_BASE_DIR/bin

# Set paths to shared libs for compiler and MPI
prepend-path LD_LIBRARY_PATH $VERA_MPI_BASE_DIR/lib:$VERA_GCC_BASE_DIR/lib64

# Set library path for installed commonents (in case shared libs installed)
prepend-path LD_LIBRARY_PATH $VERA_INSTALL_BASE_DIR/lib

# Set path to shared libs needed by MOOSE/Bison-CASL executables
prepend-path LD_LIBRARY_PATH $PETSC_LIB_DIR:$HYPRE_LIB_DIR:$HDF5_LIB_DIR

# Scale varaibles
setenv SCALE $VERA_INSTALL_BASE_DIR
setenv DATA $VERA_INSTALL_BASE_DIR/share/Insilico/test_data
setenv MPACT_DATA $VERA_INSTALL_BASE_DIR/share/Insilico/test_data
</pre></div>
</div>
<p>In the above example, a conflicting module is defined.  Upon loading the above module, if the conflicting module is loaded, it will be unloaded.</p>
<p>User generated env modules can be placed in <code class="docutils literal"><span class="pre">/usr/share/modules/modulefiles/.</span></code></p>
</div>
</div>
<div class="section" id="submitting-jobs">
<h1>Submitting Jobs<a class="headerlink" href="#submitting-jobs" title="Permalink to this headline">¶</a></h1>
<p>Large multi-core compute tasks (MPI or multi-threaded programs like MCNP, SERPENT, VERA ect...) can take advantage of the over 250+ cores avalible in the cluster.  To ensure that the cores are being utilized efficiently and fairly (if many users want to start jobs at the same time) a job scheduler is present on the cluster.  To submit multi-core jobs the user must first construct a PBS script.  The PBS script contains info about the number of cores and number compute nodes to use for the calculation.</p>
<p>Small compute tasks can be executed on the head node without going through the extra step of constructing and submitting a PBS script.  Examples of small tasks that do not need a PBS script include:  A few NJOY runs, a simple single core post processing script, visualizing results, or compiling a small program.</p>
<div class="section" id="pbs-scripts">
<h2>PBS scripts<a class="headerlink" href="#pbs-scripts" title="Permalink to this headline">¶</a></h2>
<p>A Portable Batch System (provided by TORQUE) and resource manager (Maui) handle job scheduling on the cluster.</p>
<p>To check what jobs are currently running or queued on the cluster run:</p>
<div class="highlight-python"><div class="highlight"><pre>$qstat
</pre></div>
</div>
<p>To check the status of the nodes in the cluster run:</p>
<div class="highlight-python"><div class="highlight"><pre>$qnodes
</pre></div>
</div>
<p>To submit a job to the cluster, the user must first write a PBS script.  This is essentially a bash script.  An example PBS script is given in the following section.  After writing the PBS script, the job may be submitted to the cluster with:</p>
<div class="highlight-python"><div class="highlight"><pre>$qsub &lt;pbs_script.sh&gt;
</pre></div>
</div>
<p>Documentation for writing PBS scripts can be found elsewhere on the web.  Google is your friend.</p>
</div>
<div class="section" id="pbs-script-example">
<h2>PBS Script Example<a class="headerlink" href="#pbs-script-example" title="Permalink to this headline">¶</a></h2>
<p>The following PBS script submits an job to cluster utilizing 24 cores on node nukestar02:</p>
<div class="highlight-python"><div class="highlight"><pre>#!/bin/sh
### PBS Settings
#PBS -N test_case
#PBS -l nodes=nukestar02:ppn=24
#PBS -q day
#PBS -j oe
#PBS -V

### Display the job context
echo &quot;The master node of this job is: $PBS_O_HOST&quot;
echo &quot;The execution host is:&quot; `hostname`
echo &quot;Time is:&quot; `date`
echo &quot;Directory is:&quot; `pwd`
NPROCS=`wc -l &lt; $PBS_NODEFILE`
NNODES=`uniq $PBS_NODEFILE | wc -l`
echo &quot;This job is using $NPROCS CPU(s) on the following $NNODES node(s):&quot;
echo &quot;-----------------------&quot;
uniq $PBS_NODEFILE | sort
echo &quot;-----------------------&quot;

# filename of input mcnpx deck
RUNNAME=&quot;test_p1&quot;

### MCNP run
module load mcnp6
cd ~/run/$RUNDIR
/usr/local/bin/mpiexec -mca plm rsh \
/usr/share/mcnp/v6/bin/mcnp6.mpi \
i=$RUNNAME&quot;.i&quot; \
n=$RUNNAME&quot;.&quot;
### If the first line in the input file contains a
# CONTINUE card, place a continue indicator in the
# mcnp run parameters
</pre></div>
</div>
</div>
</div>
<div class="section" id="building-software">
<h1>Building Software<a class="headerlink" href="#building-software" title="Permalink to this headline">¶</a></h1>
<p>You can switch between system-wide accessible gcc and openmpi versions by first running <code class="docutils literal"><span class="pre">module</span> <span class="pre">avail</span></code> to check which are installed and then loading the desired version with  <code class="docutils literal"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">&lt;gcc-version&gt;</span></code>.  If you need a specific version of gcc or some library you should be able to download the source to your home directory and build there.</p>
<p>See gcc, cmake, and env module documentation if you need help.</p>
<p>If the program to be compiled is exceptionally large, requires large compile time, and can take advantage of parallel compiliation: up to 4 cores on the head node when compiling the program.  Typically use the <code class="docutils literal"><span class="pre">-j</span></code> argument of make/cmake as follows to set the number of cores to be used when compiling: <code class="docutils literal"><span class="pre">make</span> <span class="pre">-j4</span> <span class="pre">&lt;other</span> <span class="pre">args&gt;</span></code>.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Remote Access</a><ul>
<li><a class="reference internal" href="#linux-osx">Linux / OSX</a></li>
<li><a class="reference internal" href="#windows-clients">Windows Clients</a></li>
<li><a class="reference internal" href="#dealing-with-broken-pipes">Dealing with &#8220;broken pipes&#8221;</a></li>
<li><a class="reference internal" href="#data-transfer-to-from-nukestar">Data transfer to/from Nukestar</a></li>
<li><a class="reference internal" href="#visualizing-results">Visualizing Results</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment-modules">Environment Modules</a><ul>
<li><a class="reference internal" href="#example-environment-module">Example Environment Module</a></li>
</ul>
</li>
<li><a class="reference internal" href="#submitting-jobs">Submitting Jobs</a><ul>
<li><a class="reference internal" href="#pbs-scripts">PBS scripts</a></li>
<li><a class="reference internal" href="#pbs-script-example">PBS Script Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-software">Building Software</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to Nukestar&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="intro.html"
                        title="next chapter">Introduction</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/users.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to Nukestar’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Nukestar 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, william gurecky.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>